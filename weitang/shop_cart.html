<!DOCTYPE html>
<html class="pb0">

<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="dist/css/mui.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/swiper.min.css">
    <link rel="stylesheet" type="text/css" href="http://at.alicdn.com/t/font_1407693_383tstklcoc.css">
    <script type="text/javascript" src="js/flexible.js"></script>
</head>

<body>
    <div class="shop_cart-wrap">
        <div class="session_1">
            <div class="edi-box">
                <span class="btn">编辑</span>
                <h3>购物车</h3>
            </div>
        </div>
        <div class="session_2">
            <div class="list-box">
                <div class="item-box clearfix">
                    <div class="select"><i class="iconfont icon-roundcheckfill"></i></div>
                    <div class="img-box" style="background-image: url(images/img_10.jpg);"></div>
                    <div class="txt-box">
                        <h3>代购商品图片湘西腊肉农家自制 正宗柴火烟熏土猪五花肉腊肉 湖南特产腊味500g</h3>
                        <p class="txt_1">备注: 例如：颜色、尺寸等信息</p>
                        <p class="txt_2"><span>¥<em>10.00</em></p>
                        <div class="nub-box">
                            <div class="mui-numbox" data-numbox-step='1' data-numbox-min='1' data-numbox-max='100'>
                                <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                                <input class="mui-numbox-input" type="number" />
                                <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-box clearfix">
                    <div class="select"><i class="iconfont icon-round"></i></div>
                    <div class="img-box" style="background-image: url(images/img_10.jpg);"></div>
                    <div class="txt-box">
                        <h3>代购商品图片湘西腊肉农家自制 正宗柴火烟熏土猪五花肉腊肉 湖南特产腊味500g</h3>
                        <p class="txt_1">备注: 例如：颜色、尺寸等信息</p>
                        <p class="txt_2"><span>¥<em>10.00</em></p>
                        <div class="nub-box">
                            <div class="mui-numbox" data-numbox-step='1' data-numbox-min='1' data-numbox-max='100'>
                                <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                                <input class="mui-numbox-input" type="number" />
                                <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-box clearfix">
                    <div class="select"><i class="iconfont icon-round"></i></div>
                    <div class="img-box" style="background-image: url(images/img_10.jpg);"></div>
                    <div class="txt-box">
                        <h3>代购商品图片湘西腊肉农家自制 正宗柴火烟熏土猪五花肉腊肉 湖南特产腊味500g</h3>
                        <p class="txt_1">备注: 例如：颜色、尺寸等信息</p>
                        <p class="txt_2"><span>¥<em>10.00</em></p>
                        <div class="nub-box">
                            <div class="mui-numbox" data-numbox-step='1' data-numbox-min='1' data-numbox-max='100'>
                                <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                                <input class="mui-numbox-input" type="number" />
                                <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-box clearfix">
                    <div class="select"><i class="iconfont icon-round"></i></div>
                    <div class="img-box" style="background-image: url(images/img_10.jpg);"></div>
                    <div class="txt-box">
                        <h3>代购商品图片湘西腊肉农家自制 正宗柴火烟熏土猪五花肉腊肉 湖南特产腊味500g</h3>
                        <p class="txt_1">备注: 例如：颜色、尺寸等信息</p>
                        <p class="txt_2"><span>¥<em>10.10</em></p>
                        <div class="nub-box">
                            <div class="mui-numbox" data-numbox-step='1' data-numbox-min='1' data-numbox-max='100'>
                                <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                                <input class="mui-numbox-input" type="number" />
                                <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-box clearfix">
                    <div class="select"><i class="iconfont icon-round"></i></div>
                    <div class="img-box" style="background-image: url(images/img_10.jpg);"></div>
                    <div class="txt-box">
                        <h3>代购商品图片湘西腊肉农家自制 正宗柴火烟熏土猪五花肉腊肉 湖南特产腊味500g</h3>
                        <p class="txt_1">备注: 例如：颜色、尺寸等信息</p>
                        <p class="txt_2"><span>¥<em>10.20</em></p>
                        <div class="nub-box">
                            <div class="mui-numbox" data-numbox-step='1' data-numbox-min='1' data-numbox-max='100'>
                                <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                                <input class="mui-numbox-input" type="number" />
                                <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="account-box">
            <div class="left-box">
                <i class="iconfont icon-round"></i>全选
            </div>
            <div class="right-box">
                合计<span>￥<i>0</i></span><em>去结算(<i>0</i>件)</em>
            </div>
            <div class="other-box">
                <span class="favorite-btn">移入收藏夹</span>
                <span class="del-btn">删除</span>
            </div>
        </div>
    </div>
    <div class="public-footer clearfix">
        <div class="item-box">
            <a href="index.html">
                <div class="icon-box">
                    <i class="iconfont icon-home_light"></i>
                </div>
                <p>首页</p>
            </a>
        </div>
        <div class="item-box">
            <a href="classify.html">
                <div class="icon-box">
                    <i class="iconfont icon-search_list_light"></i>
                </div>
                <p>分类</p>
            </a>
        </div>
        <div class="item-box">
            <a href="transfer.html">
                <div class="icon-box">
                    <span><i class="iconfont icon-jiaotongyunshu"></i></span>
                </div>
                <p>转运</p>
            </a>
        </div>
        <div class="item-box active">
            <a href="shop_cart.html">
                <div class="icon-box">
                    <i class="iconfont icon-cart_light"></i>
                </div>
                <p>购物车</p>
            </a>
        </div>
        <div class="item-box">
            <a href="my.html">
                <div class="icon-box">
                    <i class="iconfont icon-my_light"></i>
                </div>
                <p>我的</p>
            </a>
        </div>
    </div>
</body>
<script type="text/javascript" src="js/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="dist/js/mui.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script type="text/javascript">
$('.select i').click(function() {
    if ($(this).hasClass('icon-round')) {
        $(this).removeClass('icon-round').addClass('icon-roundcheckfill')
    } else {
        $(this).removeClass('icon-roundcheckfill').addClass('icon-round')
    }
});

$('.account-box .iconfont').click(function() {
    if ($(this).hasClass('icon-round')) {
        $(this).removeClass('icon-round').addClass('icon-roundcheckfill');
        $('.session_2 .item-box .iconfont').removeClass('icon-round').addClass('icon-roundcheckfill');
    } else {
        $(this).removeClass('icon-roundcheckfill').addClass('icon-round')
        $('.session_2 .item-box .iconfont').removeClass('icon-roundcheckfill').addClass('icon-round');
    }
})
var all_nub = 0;
function shop_nub() {
    all_nub = 0;
    $.each($('.session_2 .item-box .icon-roundcheckfill'), function(index, value) {
        var nub = parseInt($(value).parents('.item-box').find('.mui-numbox-input').val());
        all_nub += nub;
    })
    $('.account-box .right-box em i').html(all_nub);
}

function shop_price() {
    var all_price = 0;
    $.each($('.session_2 .item-box .icon-roundcheckfill'), function(index, value) {
        var nub = parseInt($(value).parents('.item-box').find('.mui-numbox-input').val());
        var price = $(value).parents('.item-box').find('.txt_2 em').html();
        all_price = numAdd(all_price, nub * price);
    })
    $('.account-box .right-box span i').html(all_price);
}
setInterval(function() {
    shop_nub();
    shop_price();
}, 800);


//两小数相加解决精度出现的问题
var numAdd = function(num1, num2) { //要相加的两个数
    var baseNum, baseNum1, baseNum2;    
    try {  baseNum1 = num1.toString().split(".")[1].length;  } catch (e) {  baseNum1 = 0;  }
    try { 
        baseNum2 = num2.toString().split(".")[1].length;
    } catch (e) { 
        baseNum2 = 0;
    }
    baseNum = Math.pow(10, Math.max(baseNum1, baseNum2));
    return (num1 * baseNum + num2 * baseNum) / baseNum;
};


// 编辑
$('.edi-box .btn').click(function(){
    if ($(this).hasClass('active')) {
        $(this).removeClass('active').html('编辑');
        $('.account-box .other-box').hide();
    }else{
        $(this).addClass('active').html('完成');
        $('.session_2 .item-box .iconfont').removeClass('icon-roundcheckfill').addClass('icon-round');
        $('.account-box .other-box').show();
    }
});

$('.other-box .del-btn').click(function(){
    var nub = $('.session_2 .item-box .icon-roundcheckfill').size();
    if (nub ==0) {
        mui.toast('您还没有选择宝贝～');
    }else{
        mui.confirm('确定将这'+all_nub+'个宝贝删除？',' ',['我再想想','确定'],function(el){
            console.log(el);
        });
    }

});
</script>

</html>