<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>喵果</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="../css/iconfont.css">
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<!-- 适配手机屏幕的大小 -->
	<script type="text/javascript" src='../js/flexible.js'></script>
</head>
<body class="mhome bgf2f0f0 pd230">
    <div class="cart-wrap">
    	<p class="info">同城货到付款配送时间9:00-16:00</p>
    	<div class="cart-sort ">
    		<div class="title"><i class="iconfont icon-shangpin-copy"></i>果喵超市</div>
    		<div class="sort-wrap">
	    		<div class="sort-item clearfix no-cart-item">
	    			<div class="img-box"><img src="../upload/po1.jpg"></div>
	    			<div class="text-box">
	    				<p class="sort-title">庄园精选喵果拼盘</p>
	    				<p class="info-txt">1.5kg/约15-18个/份</p>
	    				<p class="mess-text"><span class="money">￥<em>36.9</em></span> <span class="hint">次日配送</span></p>
	    				<div class="count-box">
		   					<span class="jian"><i class="iconfont icon-jian-copy"></i></span>
			   				<span class="number">1</span>
			   				<span class="add"><i class="iconfont icon-jia1"></i></span>
		   				</div>
	    			</div>
	    			<div class="select-box"><i class="iconfont icon-weibiaoti2"></i></div>
	    			<div class="del"><span>删除</span></div>
	    		</div>
	    	</div>
	    	<div class="sort-wrap">
	    		<div class="sort-item clearfix">
                    <div class="img-box"><img src="../upload/po1.jpg"></div>
                    <div class="text-box">
                        <p class="sort-title">庄园精选喵果拼盘</p>
                        <p class="info-txt">1.5kg/约15-18个/份</p>
                        <p class="mess-text"><span class="money">￥<em>36.9</em></span> <span class="hint">次日配送</span></p>
                        <div class="count-box">
                            <span class="jian"><i class="iconfont icon-jian-copy"></i></span>
                            <span class="number">1</span>
                            <span class="add"><i class="iconfont icon-jia1"></i></span>
                        </div>
                    </div>
                    <div class="select-box"><i class="iconfont icon-duihao1"></i></div>
                    <div class="del"><span>删除</span></div>
                </div>
	    	</div>
    	</div>
    	<div class="cart-sort">
    		<div class="title"><i class="iconfont icon-daodiangou"></i>喵果觅食馆</div>
    		<div class="sort-wrap">
	    		<div class="sort-item clearfix">
	    			<div class="img-box"><img src="../upload/po1.jpg"></div>
	    			<div class="text-box">
	    				<p class="sort-title">庄园精选喵果拼盘</p>
	    				<p class="info-txt">1.5kg/约15-18个/份</p>
	    				<p class="mess-text"><span class="money">￥<em>36.9</em></span> <span class="hint">次日配送</span></p>
	    				<div class="count-box">
		   					<span class="jian"><i class="iconfont icon-jian-copy"></i></span>
			   				<span class="number">1</span>
			   				<span class="add"><i class="iconfont icon-jia1"></i></span>
		   				</div>
	    			</div>
	    			<div class="select-box"><i class="iconfont icon-duihao1"></i></div>
	    			<div class="del"><span>删除</span></div>
	    		</div>
	    	</div>
    	</div>
    	<div class="cart-sort">
    		<div class="title"><i class="iconfont icon-tianpinyinliao"></i>果喵饮品馆</div>
    		<div class="sort-wrap">
	    		<div class="sort-item clearfix">
	    			<div class="img-box"><img src="../upload/po1.jpg"></div>
	    			<div class="text-box">
	    				<p class="sort-title">庄园精选喵果拼盘</p>
	    				<p class="info-txt">1.5kg/约15-18个/份</p>
	    				<p class="mess-text"><span class="money">￥<em>36</em></span> <span class="hint">次日配送</span></p>
	    				<div class="count-box">
		   					<span class="jian"><i class="iconfont icon-jian-copy"></i></span>
			   				<span class="number">2</span>
			   				<span class="add"><i class="iconfont icon-jia1"></i></span>
		   				</div>
	    			</div>
	    			<div class="select-box"><i class="iconfont icon-duihao1"></i></div>
	    			<div class="del"><span>删除</span></div>
	    		</div>
	    	</div>
    	</div>
    	<div class="cart-sort">
    		<div class="title"><i class="iconfont icon-shuiguo"></i>果喵拼盘</div>
    		<div class="sort-wrap">
	    		<div class="sort-item clearfix">
                    <div class="img-box"><img src="../upload/po1.jpg"></div>
                    <div class="text-box">
                        <p class="sort-title">庄园精选喵果拼盘</p>
                        <p class="info-txt">1.5kg/约15-18个/份</p>
                        <p class="mess-text"><span class="money">￥<em>36</em></span> <span class="hint">次日配送</span></p>
                        <div class="count-box">
                            <span class="jian"><i class="iconfont icon-jian-copy"></i></span>
                            <span class="number">2</span>
                            <span class="add"><i class="iconfont icon-jia1"></i></span>
                        </div>
                    </div>
                    <div class="select-box"><i class="iconfont icon-duihao1"></i></div>
                    <div class="del"><span>删除</span></div>
                </div>
	    	</div>
    	</div>
    </div>
    <div class="public-account cart-wrap-account active">
   		<div class="go-box">
   		    去结算
   	    </div>
   	    <div class="all-select">
   	    	<i class="iconfont icon-weibiaoti2"></i>
   	    	<span>全选</span><span class="all-money">￥<em>0</em></span>
   	    </div>
   	</div>
    <footer class="nav-footer">
    	<ul class="clearfix">
    		<li>
	    		<a href="../index.html">
	    			<i class="iconfont icon-home"></i>
		    		<p>首页</p>
	    		</a>
    		</li>
    		<li>
	    		<a href="../特惠专区/特惠专区.html">
	    			<i class="iconfont icon-renminbi1"></i>
		    		<p>特惠专区</p>
	    		</a>
    		</li>
    		<li class="active">
	    		<a href="../购物车/喵果购物车.html">
	    			<i class="iconfont icon-shopping-cart"></i>
		    		<p>购物车</p>
	    		</a>
    		</li>
    		<li>
	    		<a href="../我的喵果/我的喵果.html">
	    			<i class="iconfont icon-user"></i>
		    		<p>我的喵果</p>
	    		</a>
    		</li>
    		
    	</ul>
    </footer>
    <div class="info-txt-bg">
	    <div class="hint-del">
	    	<div class="text-body">
	    		<p>喵果真的很赞哦~</p>
	    		<p>确认删除所选商品吗？</p>
	    	</div>
	    	<div class="btn-box">
	    		<span class="cancel btn">取消</span>
	    		<span class="confirm btn">确定</span>
	    	</div>
	    </div>
	</div>
</body>
<script type="text/javascript" src="../js/jquery-1.12.2.min.js"></script>
<script type="text/javascript" src='../js/fly.js'></script>
<script type="text/javascript" src='../js/jquery.touchSwipe.min.js'></script>
<script type="text/javascript">
    $('.go-box').on('touchend',function(){
    	window.location.href='../订单确认等/订单确认.html'
    })
	/*选择产品*/
	$('.select-box').on('touchend',function(){
		/*判断是否该产品是否有货*/
      	if($(this).parents('.no-cart-item').length==0){
      		if($(this).find('.iconfont').hasClass('icon-weibiaoti2')){
				$(this).find('.iconfont').removeClass('icon-weibiaoti2').addClass('icon-duihao1');
			}else{
				 $(this).find('.iconfont').addClass('icon-weibiaoti2').removeClass('icon-duihao1');
				 $('.all-select').find('.iconfont').removeClass('icon-duihao1').addClass('icon-weibiaoti2');
			}
             all_number();
      	}
		
	})
    // 钱数的计算
    all_number();
    function  all_number(){
        var all_money=0;
        $('.cart-sort  .icon-duihao1').each(function(index,em){
           var item_money =parseFloat($(this).parents('.sort-wrap').find('.number').text())*parseFloat($(this).parents('.sort-wrap').find('.money em').text());
           console.log(item_money);
           all_money = all_money+ item_money
        })
       $('.all-money em').text( all_money);
    }

	/*全部选择*/
	$('.all-select').on('touchend',function(){
      	if($(this).find('.iconfont').hasClass('icon-weibiaoti2')){
  			$(this).find('.iconfont').removeClass('icon-weibiaoti2').addClass('icon-duihao1');
  			$('.cart-sort .icon-weibiaoti2').removeClass('icon-weibiaoti2').addClass('icon-duihao1');
      		/*去除没有货的产品*/
      		$('.no-cart-item .icon-duihao1').removeClass('icon-duihao1').addClass('icon-weibiaoti2');
            all_number();
      	}else{
            $(this).find('.iconfont').removeClass('icon-duihao').addClass('1icon-weibiaoti2');
            $('.icon-duihao1').addClass('icon-weibiaoti2').removeClass('icon-duihao1');
             $('.all-money em').text('0');
        }
      
		
	})
  /*加入购物车的js*/
     $('.count-box .add').on('click',function(event){
     	var Nub = $(this).siblings('.number');
     	var Jian = $(this).siblings('.jian');
     	/*判断是否该产品是否有货*/
      	if($(this).parents('.no-cart-item').length==0){
      		if (Nub.is(':hidden')) {
	     		Nub.show();
	     		Jian.show();
     		}
     		Nub.html(parseInt(Nub.html())+1);
            all_number();
      	}

     	/*购物车的个数的计算*/
     	$('.public-account .nub').html(parseInt($('.public-account .nub').html())+1);
     	$('.public-account').addClass('active');
     });

      $('.count-box .jian').on('touchend',function(){
      	/*判断是否该产品是否有货*/
      	if($(this).parents('.no-cart-item').length==0){
      		var Nub = $(this).siblings('.number');
			if(Nub.html() <2){
				Nub.html(0);
			}else{
				Nub.html(parseInt(Nub.html())-1);
			}
            all_number();
      	}
			/*购物车的个数的计算*/
			if ($('.public-account .nub').html()>1) {
				$('.public-account .nub').html(parseInt($('.public-account .nub').html())-1);
			}else{
				$('.public-account .nub').html(0);
			}
      });
       //手机滑动删除
	    $(".sort-item").swipe({
	        swipeLeft: function (event, direction, distance, duration, fingerCount) {
	                $(this).animate({
	                    right: 1.2 + 'rem'
	                }, 90)
	        },
	 
	        swipeRight : function (event, direction, distance, duration, fingerCount) {
	                $(this).animate({
	                    right: 0 + 'px'
	                }, 90)
	    	}
	    });
	    /*删除产品*/
	    var del_this ={};
	    $('.sort-item .del').on('touchend',function(){
	    	$('.info-txt-bg').show();
	    	del_this= this;
	    });
	    $('.info-txt-bg .btn').on('touchend',function(){
	    	if($(this).hasClass('confirm')){
	    		if ($(del_this).parents('.sort-wrap').siblings('.sort-wrap').length==0) {
		    		$(del_this).parents('.cart-sort').detach();
		    	}
		    	$(del_this).parents('.sort-wrap').detach();
	    	}else{
		    	$(del_this).parents('.sort-item').animate({right:'0'},90);
	    	}
	     $('.info-txt-bg').hide()
	    });
</script>
</html>