<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>小尾巴</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src='js/flexible.js'></script>
</head>
<body class="mhome">
	<div class="details-box">
	</div>
	<div class="pay-pop-bg">
		<div class="pay-pop">
			<div class="close"></div>
			<p class="title">付款详情</p>
			<p>会员账号<span>136****8888</span></p>
			<p>付款方式<span class="pay-other">会员卡余额支付</span></p>
			<p>需付款<span class="all-money">¥ 150.00</span></p>
            <div class="btn-box">
             	<span class="public-btn">立即付款</span>
            </div>
            <div class="pay-way">
	            <div class="close"></div>
				<p class="title">选择付款方式</p>
            	<p class="member-pay pay"><i class="member"></i>会员卡余额付款 </p>
            	<p class="weixin-pay pay"><i class="weixin"></i>微信支付</p>
            </div>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery-1.12.2.min.js"></script>
	<script type="text/javascript" src='js/moment.js'></script>
	<script type="text/javascript" src='js/json.js'></script>
	<script type="text/javascript">
	$(function(){
		/*ajax回调函数*/
		callback(details);
	    $('.public-btn').click(function(){
			$('.pay-pop-bg').show();
		})
		$('.pay-pop .close').click(function(){
	     	$('.pay-pop-bg').hide();
	     	$('.pay-way').hide();
	    })
		function callback(details){
			/*下单时间格式化*/
			details.createdTime = moment(details.createdTime).format('lll');
			/*宠物时间格式化*/
			details.pickup_time = moment(details.pickup_time).format('lll');
			render(details);
			/*判断是否出现支付按钮*/
			if (details.paymentStatus == 10) {
				$('.details-box .btn-box').show();
			}
		}
		function render(details){
			var StrHtml = '<div class="details-item">'+
		    '<div class="icon-1"></div>'+
			'<p class="time">'+details.createdTime+'</p>'+
			'<p><span class="title">服务项目：</span>'+details.serviceTypeName+'</p>'+
			'<p><span class="title">订单状态：</span>'+details.paymentStatusName+'</p>'+
			'<p class="clearfix"><span class="title">订单金额：</span><span class="all-money">¥ '+details.prepayments+'</span></p>'+
		'</div>'+
		'<div class="details-item">'+
		    '<div class="icon-1 icon-2"></div>'+
			'<p><span class="title">宠物类型：</span>'+details.petTypeName+'</p>'+
			'<p><span class="title">联系姓名：</span>'+details.customerName+'</p>'+
			'<p><span class="title">联系电话：</span>'+details.telephone+'</p>'+
			'<p><span class="title">接宠地址：</span>'+details.address+'</p>'+
			'<p><span class="title">接宠时间：</span>'+details.pickup_time+'</p>'+
		'</div>'+
		'<div class="details-item">'+
		    '<div class="icon-1 icon-3"></div>'+
			'<p>'+details.storeName+'</p>'+
			'<p  class="small-fs">'+details.storeAddress+'</p>'+
			'<p  class="small-fs"><span class="title">营业时间：</span>'+details.operateTimeDesc+'</p>'+
		'</div>'+
		'<div class="btn-box">'+
			'<div class="public-btn">立即支付</div>'+
		'</div>';
		$('.details-box').append(StrHtml);
		}

       /* 支付方式*/
       $('.pay-other').click(function(){
	       	$('.pay-way').show();
       })
       $('.pay').click(function(){
       	  $('.pay-other').html( $(this).html());
       	  $('.pay-way').hide();
       })
	})
	$('.public-btn').click(function(){
       window.location.href="pay_succ.html"
    })
	</script>
</body>
</html>